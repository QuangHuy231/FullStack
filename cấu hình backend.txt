npm init
táº¡o file package.json
entry point server.js
keywords: tá»« khÃ³a tÃ¬m kiáº¿m trÃªn github
author tÃ¡c giáº£

//cÃ i thÆ° viÃªn express
npm install body-parser@1.19.0 //viáº¿t api ,láº¥y cÃ¡c client gá»­i lÃªn server
dotenv@8.2.0 // láº¥y cÃ¡c tham sá»‘ tong file mÃ´i trÆ°á»ng
ejs@3.1.5 //viewengine
 express@4.17.1 //framework
npm install --save-dev @babel/core@7.12.10 @babel/node@7.12.10 @babel/preset-env@7.12.10 @nodemon@2.0.7
3 cÃ¡i Ä‘áº§u lÃ  trÃ¬nh biÃªn dá»‹ch babel
nodemon cÃ³ sá»± thay Ä‘á»•i file thÃ¬ server tá»± cháº¡y láº¡i


//cáº¥u truc project

táº¡o thÆ° má»¥c src
	táº¡o file server.js // dÃ¹ng cháº¡y server
	táº¡o  thÆ° má»¥c controller
	táº¡o thÆ° má»¥c services // Ä‘áº¿n database
	folder config // cáº¥u hÃ¬nh tham sá»‘
	folder views //cÃ¡c file render html 
	folder public // cÃ¡c hÃ¬nh áº£nh , css
	folder route //chá»©a cÃ¡c route : cÃ¡c Ä‘Æ°á»ng link

file .env //tham sá»‘ mÃ´i trÆ°á»ng
PORT = 8080

file .env.example //file Ä‘áº©y lÃªn github giá»‘ng file env khÃ´ng ghi giÃ¡ trá»‹ vÃ o
PORT = 

file .gitignore //quy Ä‘á»‹nh cÃ¡c file Ä‘áº©y lÃªn server
/node_modules //khÃ´ng Ä‘áº©y cÃ¡c file nÃ y
/vendor
/.idea //chá»©a cache 
.idea/
.env //chá»©a cá»•ng


file .babelrc
{
    "presets": ["@babel/preset-env"]
}


xuáº¥t hiá»‡n node_modules

ðŸ‘‰ 1. CÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n: sequlize-cli, sequelize vÃ  mysql2
npm install --save-dev sequelize-cli@6.2.0
npm install --save mysql2@2.2.5
npm install --save sequelize@6.6.2

ðŸ‘‰ 2. ThÃªm file .sequelizerc táº¡i thÆ° má»¥c root
Ná»™i dung file .sequelizerc
const path = require('path');
module.exports = {
  'config': path.resolve('./src/config', 'config.json'),
  'migrations-path': path.resolve('./src', 'migrations'),
  'models-path': path.resolve('./src', 'models'),
  'seeders-path': path.resolve('./src', 'seeders')
}

ðŸ‘‰ Táº¡i thÆ° má»¥c root, sá»­ dá»¥ng cÃ¢u lá»‡nh: node_modules/.bin/sequelize init

ðŸ‘‰ 3. Táº¡o model: 
npx sequelize-cli model:generate --name User --attributes firstName:string,lastName:string,email:string

ðŸ‘‰ 4: Táº¡o migrations:
npx sequelize-cli db:migrate

ðŸ‘‰5. Táº¡o Seeder: npx sequelize-cli seed:generate --name demo-user

//káº¿t ná»‘i tá»›i database

táº¡o file connectDB 
{
	const { Sequelize } = require('sequelize');

// Option 3: Passing parameters separately (other dialects)
const sequelize = new Sequelize('nguyenquanghuy', 'root', null, { //database ,username,password
  host: 'localhost', //Ä‘á»‹a chá»‰ server
  dialect:  'mysql',
  logging: false //táº¯t cÃ¢u thÃ´ng bÃ¡o
});

//in ra káº¿t ná»‘i tá»›i db thÃ nh cÃ´ng
let connectDB = async()=>{ 
    try {
        await sequelize.authenticate(); //dÃ¹ng await trÃªn pháº£i cÃ³ async
        console.log('Connection has been established successfully.');
      } catch (error) {
        console.error('Unable to connect to the database:', error);
      }
}

module.exports = connectDB;
}

//vÃ o server.js 
import connectDB

gá»i hÃ m connnectDB();

//homecontroller.js

import db from models/index

import db from "../models/index";
let getHomePage = async(req,res)=>{
    try{
        let data = await db.User.findAll();
        
        return res.render('homePage.ejs',{
            data: JSON.stringify(data)
        });
    } catch (e) {
        console.log(e)
    }
   
   
}

module.exports = {
    getHomePage: getHomePage,
}